-#----------------------------------------------------------------------------#
-#   layout.haml                                                              #
-#                                                                            #
-#   Copyright (c) 2015, Seventy Four, Inc.                                   #
-#   All rights reserved.                                                     #
-#----------------------------------------------------------------------------#



!!!

\
/
  Copyright (c) 2015, Seventy Four, Inc.
  All rights reserved.
  \
\

- name = 'Basilisk'
- title ||= 'A Viral Loop for Programmers'
- description ||= 'Basilisk is a viral loop for programmers.  We host our source code on GitHub, continuously deploy with Travis CI, and host our website on Heroku.  We then use our website to invite our friends to collaborate on Basilisk on GitHub.'

%html{lang: 'en'}
  %head
    %title #{name} - #{title}
    %meta{charset: 'utf-8'}
    %meta{name: 'description', content: description}

    -# Link relations
    - %w[/stylesheets/normalize.css /stylesheets/screen.css].each do |css|
      %link{rel: 'stylesheet', type: 'text/css', href: uri(css)}
    - %w[//ajax.googleapis.com //stats.g.doubleclick.net].each do |dns|
      %link{rel: 'dns-prefetch', href: dns}
    - ['/images/background.png',
       '/images/logo-trans-800.png', '/images/logo-trans-400.png',
       '/images/logo-white-800.png', '/images/logo-white-400.png',
      ].each do |asset|
      %link{rel: 'prefetch', href: uri(asset)}

    -# Apple meta tags
    %meta{name: 'apple-mobile-web-app-capable', content: 'yes'}
    %meta{name: 'apple-mobile-web-app-status-bar-style',
                content: 'black-translucent'}
    %meta{name: 'viewport',
                content: 'width=device-width, initial-scale=1.0, user-scalable=no'}

  %body
    %section
      %header
        %h1
          #{name} &mdash; #{title}
          %a{href: uri(user.nil? ? '/login' : '/logout')}
            %img{src: user.nil? ? uri('/images/logo-trans-800.png') : user.avatar_url,
                 alt: user.nil? ? 'Log In' : 'Log Out'}
        =yield

    %script{src: '//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js'}
    %script{src: uri('/javascripts/basilisk.js')}

    :javascript
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
